<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" />
    <title>Znajd¼ ukryty skarb!</title>
</head>

<body>
    <h1 id="nag³ówek">Znajd¼ ukryty skarb!</h1>

    <img id="mapa" width=400 height=400 src="http://nostarch.com/images/treasuremap.png">

    <p id="odleg³o¶æ"></p>

    <script src="https://code.jquery.com/jquery-2.1.0.js"></script>

    <script>
// Wylosuj liczbê z przedzia³u od 0 do warto¶æ zmiennej rozmiar minus 1
var uzyskajLosow±Liczbê = function (rozmiar) {
return Math.floor(Math.random() * rozmiar);
};
// Oblicz odleg³o¶æ miêdzy klikniêciem a celem
var obliczOdleg³o¶æ = function (zdarzenie, cel) {
var diffX = zdarzenie.offsetX - cel.x;
var diffY = zdarzenie.offsetY - cel.y;
return Math.sqrt((diffX * diffX) + (diffY * diffY));
};
// Uzyskaj ³añcuch reprezentuj±cy odleg³o¶æ
var skonstruujPodpowied¼ = function (odleg³o¶æ) {
if (odleg³o¶æ < 10) {
return "Parzy!";
} else if (odleg³o¶æ < 20) {
return "Gor±co";
} else if (odleg³o¶æ < 40) {
return "Ciep³o";
} else if (odleg³o¶æ < 80) {
return "Letnio";
} else if (odleg³o¶æ < 160) {
return "Zimno";
} else if (odleg³o¶æ < 320) {
return "Mróz";
} else {
return "Syberia!";
}
};
// Ustawiamy nasze zmienne
var szeroko¶æ = 400;
var wysoko¶æ = 400;
var klikniêcia = 0;
// Wylosuj miejsce ukrycia skarbu
var cel = {
x: uzyskajLosow±Liczbê(szeroko¶æ),
y: uzyskajLosow±Liczbê(wysoko¶æ)
};
// Skojarz funkcjê obs³ugi klikniêcia z elementem img
$("#mapa").click(function (zdarzenie) {
klikniêcia++;
// Oblicz odleg³o¶æ miêdzy klikniêciem (zdarzeniem) a celem (skarbem)
var odleg³o¶æ = obliczOdleg³o¶æ(zdarzenie, cel);
// Na podstawie odleg³o¶ci wybierz podpowied¼
var podpowied¼ = skonstruujPodpowied¼(odleg³o¶æ);
// Zaktualizuj element #odleg³o¶æ nowym tekstem podpowiedzi
$("#odleg³o¶æ").text(podpowied¼);
// Je¶li klikniêcie by³o dostatecznie blisko, poinformuj o wygranej
if (odleg³o¶æ < 8) {
alert("Skarb zosta³ znaleziony po " + klikniêcia + " kliniêciach!");
}
});
    </script>
</body>
</html>
