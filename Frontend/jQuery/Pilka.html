<!DOCTYPE html>
<html>
<head>
</head>
<body>
<canvas id="p³ótno" width="400" height="400"></canvas>
<script src="https://code.jquery.com/jquery-2.1.0.js"></script>
<script>
var p³ótno = document.getElementById("p³ótno");
var kontekst = p³ótno.getContext("2d");
var szerokoœæ = p³ótno.width;
var wysokoœæ = p³ótno.height;

var okr¹g = function (x, y, promieñ, wype³nijOkr¹g){
kontekst.beginPath();
kontekst.arc(x, y, promieñ, 0, Math.PI*2, false);
if(wype³nijOkr¹g){
kontekst.fill();
} else {
kontekst.stroke();
}
};

//Konstruktor Pi³ka
var Pi³ka = function() {
this.x = szerokoœæ/2;
this.y = wysokoœæ/2;
this.xSzybkoœæ=5;
this.ySzybkoœæ=0;
};

//Aktualizuj pozycjê pi³ki na podstawie jej szybkoœci
Pi³ka.prototype.przesuwaj = function(){
this.x += this.xSzybkoœæ;
this.y += this.ySzybkoœæ;

if(this.x<0){
this.x = szerokoœæ;
}else if(this.x > szerokoœæ){
this.x = 0;
}else if (this.y < 0){
this.y = wysokoœæ;
}else if (this.y > wysokoœæ){
this.y = 0;
}
};

//Narysuj pi³kê w jej bie¿¹cej pozycji
Pi³ka.prototype.rysuj = function(){
okr¹g(this.x, this.y, 10, true);
};

//Ustaw kierunek pi³ki na podstawie ³añcucha
Pi³ka.prototype.ustawKierunek = function(kierunek) {
if (kierunek === "góra"){
	this.xSzybkoœæ = 0;
	this.ySzybkoœæ = -5;
}else if(kierunek === "dó³"){
	this.xSzybkoœæ = 0;
	this.ySzybkoœæ = 5;
}else if(kierunek === "lewa"){
	this.xSzybkoœæ = -5;
	this.ySzybkoœæ = 0;
}else if(kierunek === "prawa"){
	this.xSzybkoœæ = 5;
	this.ySzybkoœæ = 0;
}else if(kierunek === "stop"){
	this.xSzybkoœæ = 0;
	this.ySzybkoœæ = 0;
}
};

//Utwórz obiekt pi³ka
var pi³ka = new Pi³ka();

//Obiekt do przekszta³cania kodów i klawiszy na nazwy dzia³añ

var dzia³aniaKlawiszy = {
32: "stop",
37: "lewa",
38: "góra",
39: "prawa",
40: "dó³"
};

//Funkcja obs³ugi zdarzenia keydown,
//wywo³ana dla ka¿dego naciœniêcia klawisza

$("body").keydown(function (zdarzenie) {
var kierunek = dzia³aniaKlawiszy[zdarzenie.keyCode];
pi³ka.ustawKierunek(kierunek);
});

//Funkcja odpowiedzialna za animacje, wywo³ywana co 30 ms
setInterval(function() {
kontekst.clearRect(0, 0, szerokoœæ, wysokoœæ);
pi³ka.rysuj();
pi³ka.przesuwaj();

kontekst.strokeRect(0, 0, szerokoœæ, wysokoœæ);
}, 30);
</script>
</body>
</html>