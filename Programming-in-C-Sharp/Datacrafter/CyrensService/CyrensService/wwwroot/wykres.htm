<?php
//=================================

function przeliczX($xa, $ya, $za)
{
$fi=45;
$teta=45;
$wsp_x=100;
$wsp_y=100;
$skala=500;
$dist=100;
$xn=-sin($fi*pi()/180)*$xa+cos($fi*pi()/180)*$ya;
$yn=-cos($fi*pi()/180)*$xa-sin($fi*pi()/180)*cos($teta*pi()/180)*$ya+sin($teta*pi()/180)*$za;
$zn=-cos($fi*pi()/180)*sin($teta*pi()/180)*$ya-cos($teta*pi()/180)*$za+$dist;
 $x=$skala*$xn/($zn+$dist)+$wsp_x;
 $y=$skala*$yn/($zn+$dist)+$wsp_y;
return $x;
}

function przeliczY($xa, $ya, $za)
{
$fi=45;
$teta=45;
$wsp_x=100;
$wsp_y=100;
$skala=500;
$dist=100;
$xn=-sin($fi*pi()/180)*$xa+cos($fi*pi()/180)*$ya;
$yn=-cos($fi*pi()/180)*$xa-sin($fi*pi()/180)*cos($teta*pi()/180)*$ya+sin($teta*pi()/180)*$za;
$zn=-cos($fi*pi()/180)*sin($teta*pi()/180)*$ya-cos($teta*pi()/180)*$za+$dist;
 $x=$skala*$xn/($zn+$dist)+$wsp_x;
 $y=$skala*$yn/($zn+$dist)+$wsp_y;
return $y;
}
//=================================


$wysokosc=240;
$szerokosc=320;
$obraz=ImageCreateTrueColor($szerokosc, $wysokosc);

$bialy=ImageColorAllocate($obraz, 255, 255, 255);
$niebieski=ImageColorAllocate($obraz, 0, 100, 170);

ImageFill($obraz, 0, 0, $niebieski);

ImageLine($obraz, przeliczX(10,10,0), przeliczY(10,10,0), przeliczX(20,10,0), przeliczY(20,10,0), $bialy);
ImageLine($obraz, przeliczX(20,10,0), przeliczY(20,10,0), przeliczX(20,20,0), przeliczY(20,20,0), $bialy);
ImageLine($obraz, przeliczX(20,20,0), przeliczY(20,20,0), przeliczX(10,20,0), przeliczY(10,20,0), $bialy);
ImageLine($obraz, przeliczX(10,20,0), przeliczY(10,20,0), przeliczX(10,10,0), przeliczY(10,10,0), $bialy);

ImageLine($obraz, przeliczX(20,20,0), przeliczY(20,20,0), przeliczX(20,20,10), przeliczY(20,20,10), $bialy);
ImageLine($obraz, przeliczX(20,20,10), przeliczY(20,20,10), przeliczX(20,10,10), przeliczY(20,10,10), $bialy);
ImageLine($obraz, przeliczX(20,10,10), przeliczY(20,10,10), przeliczX(20,10,0), przeliczY(20,10,0), $bialy);

ImageLine($obraz, przeliczX(20,10,10), przeliczY(20,10,10), przeliczX(10,10,10), przeliczY(10,10,10), $bialy);
ImageLine($obraz, przeliczX(10,10,10), przeliczY(10,10,10), przeliczX(10,10,0), przeliczY(10,10,0), $bialy);
ImageLine($obraz, przeliczX(10,10,10), przeliczY(10,10,10), przeliczX(10,20,10), przeliczY(10,20,10), $bialy);

ImageLine($obraz, przeliczX(10,20,10), przeliczY(10,20,10), przeliczX(10,20,0), przeliczY(10,20,0), $bialy);
ImageLine($obraz, przeliczX(10,20,10), przeliczY(10,20,10), przeliczX(20,20,10), przeliczY(20,20,10), $bialy);

 
ImageString($obraz, 4, 50, 150, 'Szescian - obrocony o 45 st.', $bialy);


Header('Content-type: image/png');
ImagePng($obraz);

ImageDestroy($obraz);
?> 